<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Alfalfa: A Videoconferencing Protocol for Cellular Wireless Networks
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=Alfalfa is an Internet
videoconferencing protocol that works well over cellular wireless
networks, where link speeds change dramatically with time, and current
transport protocols build up lengthy in-network queues.">
    <meta name="author" content="Keith Winstein <keithw@mit.edu>">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .callout {
      }
      .hero-titles {
        padding-bottom: 5%;
      }
      .logo {
        padding: 8px;
      }
      .prelike {
      display: block;
      padding: 8.5px;
      margin: 0 0 9px;
      font-size: 12.025px;
      line-height: 18px;
      background-color: #f5f5f5;
      border: 1px solid #ccc;
      border: 1px solid rgba(0, 0, 0, 0.15);
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      word-break: break-all;
      word-wrap: break-word;
      }
      tr.os td {
      vertical-align: bottom;
      }
      tr.inst td {
      vertical-align: top;
      }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30270105-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

  </head>

  <body data-spy="scroll">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Mosh</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="#about">About</a></li>
              <li><a href="#paper">Paper</a></li>
              <li><a href="#code">Code</a></li>
              <li><a href="#methods">Methods</a></li>
              <li><a href="#results">Results</a></li>
              <li><a href="#faq">FAQ</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <section id="about">
	<div class="hero-unit">
	  <p>
	    <div class="row">
	      <div class="span5">
		<p><h1>Alfalfa</h1></p>

	      </div>
	    </div>
	    <div class="row">
	      <div class="span5">

		<p>Alfalfa is an Internet videoconferencing protocol that
		  works well over cellular wireless networks, where link speeds change
		  dramatically with time, and current applications build up
		  lengthy in-network queues.</p>
		<p>In evaluations on traces from commercial LTE and 3G
		  networks, Alfalfa's rate control scheme achieved 2&ndash;4
		  times the throughput of Skype, Apple Facetime, and Google
		  Hangout, while reducing self-inflicted delay by 7&ndash;9
		  times.</p>
		
		<p>Alfalfa's draft research paper (under submission),
		  C++ implementation, and supplementary information
		  are available here. This is a draft Web site and we
		  are working to improve it. We welcome contributions
		  to the code and your feedback.</p>
		
		<p><small>&mdash; Keith Winstein, Anirudh Sivaraman,
		    and Hari Balakrishnan</small></p>

	      </div>
	      <div class="span5">
		<iframe width="560" height="315" src="http://www.youtube-nocookie.com/embed/ESqnuhz_dNY?rel=0" frameborder="0" allowfullscreen></iframe>
	      </div>
	    </div>
	  </p>
	  
          <p><a class="btn btn-primary btn-large" href="#paper">Get the research paper &raquo;</a>
          <a class="btn btn-primary btn-large" href="#code">Get the code &raquo;</a></p>
	</div>
      </section>
      
      <section id="paper">
	<div class="page-header">
	  <h1>Research paper</h1>
	</div>

	  <p><a href="alfalfa-paper-draft.pdf"><img src="pdf.png"> Alfalfa: A Videoconferencing Protocol for Cellular Wireless Networks</a> (in submission)</p>

	  <p>Supplementary material, including the raw traces of mobile cellular
network paths, will be posted soon.</p>

      </section>

      <section id="code">
	<div class="page-header">
	  <h1>Code</h1>
	</div>

	  <p>The source code to Alfalfa/Sprout (evaluated in the research paper) is <a href="https://github.com/keithw/alfalfa">available on GitHub.</a></p>

	  <p>Our "explicit-state" MPEG-2 implementation includes an <a href="https://github.com/keithw/mympeg2enc">encoder API (based on mpeg2enc)</a> and a <a href="https://github.com/keithw/ahab">decoder API (built around libmpeg2)</a>.</p>

	  <p>Our code for saturating wireless networks and then replaying those traces on a hardware gateway is also <a href="https://github.com/keithw/multisend/tree/master/sender">available on GitHub.</a></p>

	  <p>Our implementation of the "CoDel" AQM algorithm <a href="https://github.com/anirudhSK/cell-codel/blob/master/codel-for-cellsim/delay-queue.cc">is available in a different repository.</a></p>
      </section>

      <section id="methods">
	<div class="page-header">
	  <h1>Methods</h1>
	</div>

	<h2>Data Collection</h2>

	<p>Cellular network traces were collected while driving in
Boston, Mass., and surrounding municipalities. We simultaneously
saturated the uplink and downlink of an Android smartphone tethered to
a Linux laptop and measured the times when packets arrived across each
link. Uplink datagrams were sent to a server at MIT, generally less
than 50 ms RTT from the carrier's first/last hop.</p>

	<p>The code for the <a href="https://github.com/keithw/multisend/blob/master/sender/saturatr.cc">saturatr</a> can be found on GitHub.</p>

	<p>The Verizon LTE and 1xEV-DO (3G) traces used a Samsung
	Galaxy Nexus smartphone. The AT&T trace used a Samsung Galaxy
	S3 smartphone. The T-Mobile trace used an HTC smartphone.</p>

	<h2>Evaluation of Systems</h2>

	<p>We used a physical gateway computer, with two Ethernet interfaces,
	  to replay the recordings from cellular networks. The gateway
	  queued incoming packets indefinitely, and released them to
	  the other interface according to the schedule previously recorded
	  in the trace.</p>

	<p>The code for
	the <a href="https://github.com/keithw/multisend/blob/master/sender/cellsim.cc">cellsim</a>
	tool (used to replay traces from the saturatr) can be found on
	GitHub.</p>

	<p>We evaluated videoconferencing systems and TCP variants with one
	  computer connected directly to a gigabit switch and to the Internet.
	  The other computer was connected to the cellsim, whose other Ethernet
	  interface was connected to the same gigabit switch.</p>

	<p>We tested the following configurations:

	<table>
	  <tr><th>Program</th><th>Version</th><th>OS</th><th>Endpoints</th></tr>
	  <tr><td>Alfalfa/Sprout</td><td>"evaluated" and "ewma-evaluated" tags</td><td>Linux 3.2.0-29-generic (Ubuntu 12.04 LTS)</td><td>Intel Core i7 PC</td></tr>
	  <tr><td>Skype</td><td>5.10.0.116</td><td>Windows 7</td><td>Intel Core i7 PC</td></tr>
	  <tr><td>Google Hangout</td><td>in Chrome 21.0.1180.89</td><td>Windows 7</td><td>Intel Core i7 PC</td></tr>
	  <tr><td>Apple Facetime</td><td>2.0 (1070)</td><td>OS X 10.8.1</td><td>MacBook Pro (2.3 GHz i7), MacBook Air (1.8 GHz i5)</td></tr>
	  <tr><td>TCP CUBIC</td><td>in Linux 3.2.0</td><td></td><td>Intel Core i7 PC</td></tr>
	  <tr><td>TCP Vegas</td><td>in Linux 3.2.0</td><td></td><td>Intel Core i7 PC</td></tr>
	  <tr><td>LEDBAT</td><td>in uTP</td><td>Linux 3.2.0</td><td>Intel Core i7 PC</td></tr>
	  <tr><td>COMPOUND TCP</td><td>in Windows 7</td><td></td><td>Intel Core i7 PC</td></tr>
	</table>

      </section>

      <section id="faq">
	<div class="page-header">
	  <h1>Frequently Asked Questions</h1>
	</div>

	<h4 class="callout">Q: Who wrote Alfalfa?</h4>

	<p>Alfalfa was written by Keith Winstein, Anirudh Sivaraman, and Hari Balakrishnan.</p>

	<h4 class="callout">Q: Can I use this for a real video conference?</h4>

	<p>Unfortunately, not yet. We have an implementation of
	"explicit-state" MPEG-2 video, as discussed in the research
	paper, but we don't have audio and we haven't evaluated the
	system end-to-end. Our evaluation focuses on the rate control
	algorithm (Sprout), which achieves the maximum throughput
	possible while bounding the probability of building up a
	length in-network queue.</p>

	<h4 class="callout">Q: Who helped with Alfalfa?</h4>

	<p>We're grateful for assistance and helpful discussions with Andrew McGregor, Tim Shepard, Dave TÃ¤ht, and Shuo Deng.</p>

	<h4 class="callout">Q: What are the major limitations of these
	measurements and this work?</h4>

	<ul>

	<li>We have only tested configurations where the flow (be it
	Alfalfa, Skype, TCP, etc.) is the only flow on the bottleneck
	link. This may be realistic for a cellular link with per-user
	  queueing, but a home Internet link with many users sharing
	  a cable modem may behave differently.</li>

	<li>Our measurements covered a bidirectional video conference
	  that transited one cellular link in each direction
	  simultaneously. We haven't tested mobile-to-mobile links
	  where each direction would transit two cellular links,
	  or more complicated topologies.</li>

	<li>We have only quantitatively evaluated
	  the <strong>networking</strong> performance of Alfalfa,
	  compared with the comparable algorithms in videoconferencing
	  programs and various flavors of TCP. Although we think that
	  the Alfalfa "explicit-state" video API is a good idea, we
	  have only implemented it for MPEG-2, it is not competitive
	  with more recent video coding techniques, and we have not
	  tested an end-to-end video conferencing application.</li>

	<li>Alfalfa's nature as an <strong>end-to-end</strong>
	  application means that it cannot do things that modifying
	  routers (e.g. by adding AQM) might achieve. For example, if
	  a competing TCP flow has created a standing queue before our
	  bottleneck link, it is probably impossible for any protocol
	  to achieve low delay over that link. Changing the router to
	  include per-flow queueing or AQM might be able to fix the
	  problem in a way an end-to-end protocol can't.</li>

	<li>Sprout's predictive model of link dynamics hasn't been
	  tuned in response to much real-world dat &mdash; it was
	  "frozen" before we collected our traces and we have not
	  tried to improve its predictive power on real varying links
	  yet.</li>
      </section>

      <section id="contact">
	<div class="page-header">
	  <h1>Contact</h1>
	</div>

	Please e-mail alfalfa at mit dot edu with any questions.

      </section>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
  </body>
</html>
